<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Secure Password Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body {
            font-family: sans-serif;
           background: #47e9a5;
            padding: 20px;
        }

        h2 {
            text-align: center;
        }

        input,
        button {
            padding: 8px;
            margin: 5px;
            width: 100%;
        }

        .entry {
            background: #fff;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .entry strong {
            display: block;
        }

        .container {
            max-width: 500px;
            margin: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>🔐 Secure Password Manager</h2>

        <input type="password" id="masterKey" placeholder="Enter Master Key" />

        <h3>Add New Password</h3>
        <input type="text" id="site" placeholder="Website Name (e.g., facebook.com)" />
        <input type="text" id="username" placeholder="Username or Email" />
        <input type="password" id="password" placeholder="Password" />
        <button onclick="savePassword()">Save Password</button>

        <h3>Stored Passwords</h3>
        <div id="passwordList"></div>
    </div>

    <script>
        const masterKeyInput = document.getElementById('masterKey');

        function encrypt(text, key) {
            return CryptoJS.AES.encrypt(text, key).toString();
        }

        function decrypt(cipher, key) {
            try {
                return CryptoJS.AES.decrypt(cipher, key).toString(CryptoJS.enc.Utf8);
            } catch (e) {
                return null;
            }
        }

        function savePassword() {
            const site = document.getElementById('site').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const masterKey = masterKeyInput.value;

            if (!site || !username || !password || !masterKey) {
                alert("Please fill in all fields including master key.");
                return;
            }

            const encrypted = {
                site: encrypt(site, masterKey),
                username: encrypt(username, masterKey),
                password: encrypt(password, masterKey)
            };

            const stored = JSON.parse(localStorage.getItem("passwords") || "[]");
            stored.push(encrypted);
            localStorage.setItem("passwords", JSON.stringify(stored));

            alert("✅ Password saved securely!");
            loadPasswords();
        }

        function loadPasswords() {
            const list = document.getElementById('passwordList');
            const masterKey = masterKeyInput.value;
            const stored = JSON.parse(localStorage.getItem("passwords") || "[]");

            list.innerHTML = '';

            stored.forEach((entry, index) => {
                const site = decrypt(entry.site, masterKey);
                const username = decrypt(entry.username, masterKey);
                const password = decrypt(entry.password, masterKey);

                if (!site || !username || !password) {
                    list.innerHTML += `<div class="entry"></div>`;
                } else {
                    list.innerHTML += `
            <div class="entry">
              <strong>🔗 ${site}</strong>
              👤 ${username}<br>
              🔑 ${password}
              <br><button onclick="deleteEntry(${index})">🗑 Delete</button>
            </div>
          `;
                }
            });
        }

        function deleteEntry(index) {
            const stored = JSON.parse(localStorage.getItem("passwords") || "[]");
            stored.splice(index, 1);
            localStorage.setItem("passwords", JSON.stringify(stored));
            loadPasswords();
        }

        // Load passwords when page loads
        masterKeyInput.addEventListener('input', loadPasswords);
    </script>
    <section style="padding: 1rem; background-color: #f3f3f3; border-radius: 12px; margin-top: 2rem;">
  <h2>🔐 Security Information</h2>
  <p>
    Your passwords are encrypted in your browser using <strong>AES-256</strong>.
    This website does not send or store any information on a server. 
    All data is processed locally. Only you can decrypt your saved passwords using your master key.
  </p>
  <p style="color: green;"><strong>✔ Safe, Secure, and Private</strong></p>
</section>

</body>

</html>
